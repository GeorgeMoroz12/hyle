---
import { getCollection } from 'astro:content';
import '../styles/global.css';

const products = await getCollection('products');

// Функция для цвета статуса
const getStatusColor = (status: string) => {
	switch(status) {
		case 'В наличии': return 'bg-green-100 text-green-800';
		case 'Под заказ': return 'bg-yellow-100 text-yellow-800';
		case 'Продано': return 'bg-gray-100 text-gray-500';
		default: return 'bg-gray-100 text-gray-800';
	}
};
---

<html lang="ru">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<title>Hyle Ceramics</title>
	</head>
	<body class="bg-[#F9F9F9] min-h-screen font-sans text-gray-900">
		<main class="max-w-6xl mx-auto p-6 md:p-12">
			
			<header class="mb-16 text-center">
				<h1 class="text-5xl font-light tracking-tight text-gray-900 mb-4">Hyle Ceramics</h1>
				<p class="text-gray-500 uppercase tracking-widest text-xs">Авторская керамика • Ручная работа</p>
			</header>

			<!-- Сетка товаров -->
			<section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
				{products.map((product) => (
					<article class="group bg-white rounded-xl overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100">
						
						<!-- Здесь будет фото (пока заглушка цветом) -->
						<div class="h-64 bg-gray-200 w-full group-hover:bg-gray-300 transition-colors flex items-center justify-center text-gray-400">
							[Фото изделия]
						</div>

						<div class="p-6">
							<div class="flex justify-between items-start mb-2">
								<span class="text-xs font-bold text-gray-400 uppercase tracking-wide">
									{product.data.category}
								</span>
								<span class={`px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide ${getStatusColor(product.data.status)}`}>
									{product.data.status}
								</span>
							</div>

							<h2 class="text-xl font-medium text-gray-900 mb-2">
								{product.data.title}
							</h2>

							<div class="text-sm text-gray-500 mb-4 line-clamp-2">
								{product.body /* Astro автоматически не рендерит body здесь, но для примера мы знаем что контент есть */}
								{product.data.specs.material}
							</div>

							<div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-50">
								<span class="text-lg font-semibold text-gray-900">
									{product.data.price} ₽
								</span>
								<button class="text-sm text-gray-900 border-b border-gray-900 pb-0.5 hover:text-gray-600 hover:border-gray-600 transition-colors">
									Подробнее
								</button>
							</div>
						</div>
					</article>
				))}
			</section>

		</main>
	</body>
</html>